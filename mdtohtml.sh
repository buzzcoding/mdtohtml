input=input.md
output=output.html

printf "" > $output
cat $input | \
perl -pe "s/(\*\*)(.{1,})(\*\*)/<b>\2<\/b>/" | \
perl -pe "s/(\*)(?! )(.{1,})(\*)/<i>\2<\/i>/" | \
perl -pe "s/(###### )(.{1,})/<h6>\2<\/h6>/" | \
perl -pe "s/(##### )(.{1,})/<h5>\2<\/h5>/" | \
perl -pe "s/(#### )(.{1,})/<h4>\2<\/h4>/" | \
perl -pe "s/(### )(.{1,})/<h3>\2<\/h3>/" | \
perl -pe "s/(## )(.{1,})/<h2>\2<\/h2>/" | \
perl -pe "s/(# )(.{1,})/<h1>\2<\/h1>/" | \
perl -pe "s/\\\\$/<br>/gm" | \
perl -pe "s/^(\* )(.{1,})/	<li>\2<\/li>/" | \
perl -0777p -e "s/((	<li>.{1,}<\/li>\n?){1,})/<ul>\n\1<\/ul>/g" | \
perl -pe "s/^([0-9]{1,}\. )(.{1,})/	<li>\2<\/li>/" | \
perl -0777p -e "s/(((	<li>.{1,}<\/li>\n?){1,}|	*(\*.{1,}|[0-9]{1,}\..{1,})\n?){1,})/<ol>\n\1\n<\/ol>\n/gm" | \
perl -0777p -e "s/<ul>\n<ol>/<ul>/gm" | \
perl -0777p -e "s/<\/ol>\n<\/ul>/<\/ul>/gm" | \
perl -pe "s/^(	{1,6})(\* )(.{1,})/\1	<li>\3<\/li>/" | \
perl -0777p -e "s/^(((	{1,})	<li>.{1,}<\/li>\n?){1,})/\3<ul>\n\1\3<\/ul>\n/gm" | \
perl -0777p -e "s/^(((	{2,})	<li>.{1,}<\/li>\n?){1,})/\3<ul>\n\1\3<\/ul>\n/gm" | \
perl -0777p -e "s/^(((	{3,})	<li>.{1,}<\/li>\n?){1,})/\3<ul>\n\1\3<\/ul>\n/gm" | \
perl -0777p -e "s/^(((	{4,})	<li>.{1,}<\/li>\n?){1,})/\3<ul>\n\1\3<\/ul>\n/gm" | \
perl -0777p -e "s/^(((	{5,})	<li>.{1,}<\/li>\n?){1,})/\3<ul>\n\1\3<\/ul>\n/gm" | \
perl -0777p -e "s/^(((	{6,})	<li>.{1,}<\/li>\n?){1,})/\3<ul>\n\1\3<\/ul>\n/gm" | \
perl -pe "s/^(	{1,6})([0-9]{1,}. )(.{1,})/\1	<nli>\3<\/nli>/" | \
perl -0777p -e "s/^(((	{1,})	<nli>.{1,}<\/nli>\n?){1,})/\3<ol>\n\1\3<\/ol>\n/gm" | \
perl -0777p -e "s/^(((	{2,})	<nli>.{1,}<\/nli>\n?){1,})/\3<ol>\n\1\3<\/ol>\n/gm" | \
perl -0777p -e "s/^(((	{3,})	<nli>.{1,}<\/nli>\n?){1,})/\3<ol>\n\1\3<\/ol>\n/gm" | \
perl -0777p -e "s/^(((	{4,})	<nli>.{1,}<\/nli>\n?){1,})/\3<ol>\n\1\3<\/ol>\n/gm" | \
perl -0777p -e "s/^(((	{5,})	<nli>.{1,}<\/nli>\n?){1,})/\3<ol>\n\1\3<\/ol>\n/gm" | \
perl -0777p -e "s/^(((	{6,})	<nli>.{1,}<\/nli>\n?){1,})/\3<ol>\n\1\3<\/ol>\n/gm" | \
perl -pe "s/<(\/)?nli>/<\1li>/" \
>> $output
